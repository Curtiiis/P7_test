<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login</title>

   <link rel="stylesheet" href="./style.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
</head>

<body>

   <div class="login">
      <div class="login_box">
         <div class="title">
            <a href="./index.html">
               <img src="./public/img/logo-degrade-1-small.png" alt="logo groupy" width="50px" height="50px">
            </a>
            <h1>GROUPY <span>App</span></h1>
            <h2>Inscription</h2>
         </div>


         <form id="form" method="post" action="/">
            <div class="form-group">
               <input type="text" id="pseudo" name="pseudo" required>
               <label for="pseudo">Pseudo</label>
               <span></span>
               <div class="error"></div>
            </div>
            <div class="form-group">
               <input type="text" id="email" name="email" required>
               <label for="email">Email</label>
               <span></span>
               <div class="error"></div>
            </div>
            <div class="form-group">
               <input type="password" id="password" name="password" required>
               <label for="password">Mot de passe</label>
               <i class="far fa-eye" id="togglePassword"></i>
               <span></span>
               <div class="error"></div>
            </div>
            <div class="form-group">
               <input type="password" id="pwd-repeat" name="pwd-repeat" required>
               <label for="pwd-repeat">Confirmez le mot de passe</label>
               <i class="far fa-eye" id="togglePassword2"></i>
               <span></span>
               <div class="error"></div>
            </div>

            <button type="submit" id="submit-btn">S'inscrire</button>
         </form>
         <p class="cgu">En créant un compte, vous acceptez les
            <button id="cgu-button">CGU</button>
         </p>

         <div id="cgu-modal" class="modal">
            <div class="modal__content">

               <span id="close-btn" class="close" title="Close Modal"></span>

               <h1>Conditions générales d'utilisation du réseau social d’entreprise GroupyApp </h1>
               <p>
                  Le présent document a pour objet de définir les modalités et conditions dans lesquelles d’une part
                  l’application réseau social <span> GroupyApp </span> , ci-après dénommé <span> GroupyApp </span>, met
                  à la
                  disposition de ses
                  utilisateurs le site, et les services disponibles sur le site et d’autre part, la manière par laquelle
                  l’utilisateur accède au site et utilise ses services. <br>
                  Toute connexion au site est subordonnée au respect des présentes conditions. <br>
                  Pour l’utilisateur, le simple accès au site de <span> GroupyApp </span> à l’adresse URL suivante
                  <a href="#"  class="cgu-link"><span>https://app.groupy.fr</span></a> implique l’acceptation de l’ensemble des conditions décrites
                  ci-après.
               </p>

               <h2>Propriété intellectuelle</h2>
               <p>
                  La structure générale du site <span> GroupyApp </span> ainsi que les textes, graphiques, images, sons
                  et
                  vidéos la composant, sont la propriété de l'éditeur ou de ses partenaires. Toute représentation et/ou
                  reproduction et/ou exploitation partielle ou totale des contenus et services proposés par le site
                  <span> GroupyApp </span>, par quelque procédé que ce soit, sans l'autorisation préalable et par écrit
                  de
                  l’administrateur de <span> GroupyApp </span> et/ou de ses partenaires est strictement interdite et
                  serait
                  susceptible de constituer une contrefaçon au sens des articles L 335-2 et suivants du Code de la
                  propriété intellectuelle. <br>

                  Les marques " <span> GroupyApp </span> ", "Groupomania" sont des marques déposées par Groupomania SA.
                  Toute
                  représentation et/ou reproduction et/ou exploitation partielle ou totale de ces marques, de quelque
                  nature que ce soit, est totalement prohibée.
               </p>

               <h2>Liens hypertextes</h2>
               <p>
                  Le site <span> GroupyApp </span> peut contenir des liens hypertextes vers d’autres sites présents sur
                  le
                  réseau Internet. Les liens vers ces autres ressources vous font quitter le site. <br>
                  Il est possible de créer un lien vers la page de présentation de ce site sans autorisation expresse de
                  l’administrateur. Aucune autorisation ou demande d’information préalable ne peut être exigée par
                  l’éditeur à l’égard d’un site qui souhaite établir un lien vers le site de l’éditeur. Il convient
                  toutefois d’afficher ce site dans une nouvelle fenêtre du navigateur. Cependant, <span> GroupyApp
                  </span> se
                  réserve le droit de demander la suppression d’un lien qu’il estime non conforme à l’objet de son site.
               </p>

               <h2>Responsabilité de l’éditeur</h2>
               <p>
                  Les informations et/ou documents figurant sur ce site et/ou accessibles par ce site proviennent de
                  sources considérées comme étant fiables. <br>
                  Toutefois, ces informations et/ou documents sont susceptibles de contenir des inexactitudes techniques
                  et des erreurs typographiques.
                  <span> GroupyApp </span> se réserve le droit de les corriger, dès que ces erreurs sont portées à sa
                  connaissance. <br>
                  Il est fortement recommandé de vérifier l’exactitude et la pertinence des informations et/ou documents
                  mis à disposition sur ce site.
                  Les informations et/ou documents disponibles sur ce site sont susceptibles d’être modifiés à tout
                  moment, et peuvent avoir fait l’objet de mises à jour. En particulier, ils peuvent avoir fait l’objet
                  d’une mise à jour entre le moment de leur téléchargement et celui où l’utilisateur en prend
                  connaissance.
                  L’utilisation des informations et/ou documents disponibles sur ce site se fait sous l’entière et seule
                  responsabilité de l’utilisateur, qui assume la totalité des conséquences pouvant en découler, sans que
                  <span> GroupyApp </span> puisse être recherché à ce titre, et sans recours contre ce dernier. <br>
                  <span> GroupyApp </span> ne pourra en aucun cas être tenu responsable de tout dommage de quelque
                  nature
                  qu’il soit résultant de l’interprétation ou de l’utilisation des informations et/ou documents
                  disponibles sur ce site.
               </p>

               <h2>Accès au site</h2>
               <p>
                  L’éditeur s’efforce de permettre l’accès au site 24 heures sur 24, 7 jours sur 7, sauf en cas de force
                  majeure ou d’un événement hors du contrôle de <span> GroupyApp </span>, et sous réserve des
                  éventuelles
                  pannes et interventions de maintenance nécessaires au bon fonctionnement du site et des services. <br>
                  Par conséquent, <span> GroupyApp </span> ne peut garantir une disponibilité du site et/ou des
                  services, une
                  fiabilité des transmissions et des performances en terme de temps de réponse ou de qualité. Il n’est
                  prévu aucune assistance technique vis à vis de l’utilisateur que ce soit par des moyens électronique
                  ou téléphonique. <br>

                  La responsabilité de l’éditeur ne saurait être engagée en cas d’impossibilité d’accès à ce site et/ou
                  d’utilisation des services.

                  Par ailleurs, <span> GroupyApp </span> peut être amené à interrompre le site ou une partie des
                  services, à
                  tout moment sans préavis, le tout sans droit à indemnités. L’utilisateur reconnaît et accepte que
                  <span>
                     GroupyApp </span> ne soit pas responsable des interruptions, et des conséquences qui peuvent en
                  découler pour l’utilisateur ou tout tiers.
               </p>

               <h2>Modification des conditions d’utilisation</h2>
               <p>
                  <span> GroupyApp </span> se réserve la possibilité de modifier, à tout moment et sans préavis, les
                  présentes
                  conditions d’utilisation afin de les adapter aux évolutions du site et/ou de son exploitation.
               </p>

               <h2>Règles d'usage d'Internet</h2>
               <p>
                  L’utilisateur déclare accepter les caractéristiques et les limites d’Internet, et notamment reconnaît
                  que : <br>
                  <span> GroupyApp </span> n’assume aucune responsabilité sur les services accessibles par Internet et
                  n’exerce aucun contrôle de quelque forme que ce soit sur la nature et les caractéristiques des données
                  qui pourraient transiter par l’intermédiaire de son centre serveur.
                  L’utilisateur reconnaît que les données circulant sur Internet ne sont pas protégées notamment contre
                  les détournements éventuels. La communication de toute information jugée par l’utilisateur de nature
                  sensible ou confidentielle se fait à ses risques et périls.
                  L’utilisateur reconnaît que les données circulant sur Internet peuvent être réglementées en termes
                  d’usage ou être protégées par un droit de propriété. <br>
                  L’utilisateur est seul responsable de l’usage des données qu’il consulte, interroge et transfère sur
                  Internet. <br>
                  L’utilisateur reconnaît que <span> GroupyApp </span> ne dispose d’aucun moyen de contrôle sur le
                  contenu des
                  services accessibles sur Internet.
               </p>

               <h2>Droit applicable</h2>
               <p>
                  Tant le présent site que les modalités et conditions de son utilisation sont régis par le droit
                  français, quel que soit le lieu d’utilisation. En cas de contestation éventuelle, et après l’échec de
                  toute tentative de recherche d’une solution amiable, les tribunaux français seront seuls compétents
                  pour connaître de ce litige. <br>
                  Pour toute question relative aux présentes conditions d’utilisation du site, vous pouvez nous écrire à
                  l’adresse suivante : <br>
                  <a href="mailto:contact@groupy-app.fr" class="cgu-link">
                     <span>contact@groupy-app.fr</span>
                  </a>
               </p>
            </div>
         </div>

         <div class="signup_link">
            Vous avez déjà un compte ? <br>
            <a href="./login.html">Connectez-vous</a>
         </div>

      </div>
   </div>

   <div class="validated-box">
      <img src="./public/img/checked.png" alt="">
   </div>

   <script src="./auth-data.js"></script>
   <script>

      const pwdRepeat = document.querySelector('#pwd-repeat')
      const togglePassword2 = document.querySelector('#togglePassword2')
      const cguButton = document.querySelector('#cgu-button');
      const cguModal = document.querySelector('#cgu-modal');
      
      // Display/Hide CGU
      cguButton.onclick = () => {
         cguModal.style.display = 'block';
         document.querySelector('.login_box').style.background = 'none';
      }

      window.onclick = (e) => {
         if (e.target == cguModal) {
            cguModal.style.display = "none";
            document.querySelector('.login_box').style.background = '#fafafa';
         }
      }

      document.querySelector('#close-btn').onclick = () => {
         cguModal.style.display='none';
         document.querySelector('.login_box').style.background = '#fafafa';
      }

      //Show or Hide the password
      togglePassword2.onclick = () => {
         togglePassword2.classList.toggle("blue")
         pwdRepeat.type === "password"
            ? pwdRepeat.type = "text"
            : pwdRepeat.type = "password";
      }

      // Form validation
      form.onsubmit = (e) => {
         e.preventDefault();
         checkInputsValidity()
         confirmPassword()
         displaySignupValidity()
      }

      //FUNCTIONS
      function checkInputsValidity() {
         let checkInputsValidity =
            regexTextNumbers(pseudo.value.trim()) &&
            regexEmail(email.value.trim()) &&
            regexPassword(password.value.trim());

         if (checkInputsValidity) {
            let data = {
               pseudo: pseudo.value.trim(),
               email: email.value.trim(),
               password: password.value.trim()
            };
            console.log(data)
            validBox()
            redirection()
            return true
         }
         else {
            return false
         }
      }

      function displaySignupValidity() {
         displayValidity(pseudo, regexTextNumbers, "pseudo")
         displayValidity(email, regexEmail, "email")
         displayPasswordValidity(password, regexPassword)
      }

      function confirmPassword() {
         if (password.value != pwdRepeat.value) {
            setError(pwdRepeat, "Les mots de passe ne correspondent pas")
            return false
         } else {
            setSuccess(pwdRepeat);
            return true
         }
      }

   </script>
</body>

</html>